<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-start/smeshing/smeshing_adv/post_1n" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Managing Multiple PoST Services on A Single Node | Spacemesh Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.spacemesh.io/docs/start/smeshing/smeshing_adv/post_1n"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="google-site-verification" content="X71PuqeyvYyDQE1_3384Aml425A-ZELYBf7-ZfFRUoY"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Managing Multiple PoST Services on A Single Node | Spacemesh Documentation"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.spacemesh.io/docs/start/smeshing/smeshing_adv/post_1n"><link data-rh="true" rel="alternate" href="https://docs.spacemesh.io/docs/start/smeshing/smeshing_adv/post_1n" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.spacemesh.io/docs/start/smeshing/smeshing_adv/post_1n" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OGGMN1SAN3-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2CL6HG3B96"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2CL6HG3B96",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Spacemesh Documentation" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css"><link rel="stylesheet" href="/assets/css/styles.a7d2cb45.css">
<link rel="preload" href="/assets/js/runtime~main.e05d585a.js" as="script">
<link rel="preload" href="/assets/js/main.7fb6dc6c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/learn/spacemesh">Explainers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/start/smeshing/start">Guides</a><a href="https://mainnet-api-docs.spacemesh.network/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/start/smeshing/start">Smeshing Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/start">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/requirements">System Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/considerations">Practical Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/netconfig">Network Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/start/smeshing/smeshing_basic/install">Basic Smeshing Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/start/smeshing/smeshing_adv/setup">Advanced Smeshing Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/setup">Advanced Smeshing Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/post_init">PoST Initialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/api">API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/poet">PoET Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/performance">Fine-Tuning Node Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/equivocation">Avoiding Equivocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/verification">State Verification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/quicksync">Quicksync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/advanced">Additional Advanced Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/start/smeshing/smeshing_adv/post_1n">Managing Multiple PoST Services on A Single Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/multigpu">Initializing a Subset of PoST Data With postcli</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smeshing/smeshing_adv/troubleshooting">Troubleshooting</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start/rewards">How Rewards Work</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start/integration">Integration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start/ledger">Ledger Guide</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Smeshing Guide</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Smeshing Guide</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Managing Multiple PoST Services on A Single Node</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Managing Multiple PoST Services on A Single Node</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>This guide is your roadmap to efficiently managing multiple Proof of Space-Time (PoST) services using just a single node. With the Spacemesh protocol&#x27;s latest advancements, it is now possible to extend a node&#x27;s capabilities beyond the previous one-identity-per-node model. It means users can streamline their operations, reduce overhead, and increase their participation in the network without multiplying their hardware or maintenance efforts. This approach requires only one database for all identities, reducing local storage needs and minimizing data broadcasted or fetched from the network. It not only simplifies the lifecycle management of multiple identities but also enhances operational efficiency and network performance. Whether you are looking to add new identities, consolidate existing services, or simply optimize your setup for possibly greater rewards, you are in the right place.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting Started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting Started" title="Direct link to Getting Started">​</a></h2><p>Before diving into managing multiple PoST services on your node, ensure you have the following aspects covered.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3><ol><li><strong>Familiarity With CLI Operations:</strong> Basic knowledge of command-line interfaces (CLI) and blockchain concepts.</li><li><strong>System Specifications:</strong> Ensure your system meets the recommended hardware specifications for running multiple PoST services, including sufficient storage and processing power, as well as OpenCL support.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backup">Backup<a href="#backup" class="hash-link" aria-label="Direct link to Backup" title="Direct link to Backup">​</a></h3><p><strong>Important Reminder:</strong> Before you begin following this guide or making any changes to your node and PoST services setup, it is crucial to back up all your critical data. These steps will help ensure that you can recover your system to its correct state in case of unexpected issues.</p><p><strong>What to Back Up:</strong></p><ol><li>Node and PoST configuration details, node state.</li><li>Private Keys and credentials, especially <code>*.key</code> files for each of your PoST identities. If you are upgrading from earlier releases make sure that you backup <code>*.key</code> files in the <code>node_data/identities</code> folder.</li><li>Other sensitive information: Any other details from your custom setup, e.g. concerning external drives, encrypting, etc.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initial-setup-and-configuration">Initial Setup And Configuration<a href="#initial-setup-and-configuration" class="hash-link" aria-label="Direct link to Initial Setup And Configuration" title="Direct link to Initial Setup And Configuration">​</a></h3><ol><li><p><strong>Spacemesh Node Setup:</strong> Ensure your Spacemesh node is operational, utilizing the latest release supporting multiple PoST services (1.4.x series or newer). For detailed setup instructions, refer to the <a href="https://github.com/spacemeshos/go-spacemesh/blob/develop/README.md" target="_blank" rel="noopener noreferrer">go-spacemesh documentation</a>. For this feature setup process, make sure your node is not smeshing. You should specify in your config:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token property">&quot;smeshing&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token property">&quot;smeshing-start&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>Additionally, you should not have any <code>smeshing-opts</code> in your configuration, but it will not negatively impact the system if they are present. If you are migrating from existing nodes, you can transfer all <code>smeshing-proving-opts</code>
directly to the corresponding post-service configuration without issues.</p><p>   :::note</p><p>   You must ensure the node is set to not smeshing, as supervised PoST service and remote PoST services cannot operate
simultaneously. This guide focuses on adding multiple PoST services to the node, so the supervised PoST service must
be disabled.</p><p>   :::</p><p>   :::note</p><p>   You still need to set the coinbase on the node where the PoST services are connected. The configuration option for
this remains unchanged, specifically, <code>smeshing-coinbase</code>.</p><p>   :::</p><ol start="2"><li><strong>Software Requirements:</strong> The latest versions of <code>postcli</code> and <code>post-service</code> from the Spacemesh GitHub repository.</li><li><strong>Your Case:</strong> Gather info and organize all your node and PoS data paths, PoST services configs and details, and hardware access if necessary.</li></ol><p>For the sake of conciseness, we assume you have:</p><ul><li><code>node-data</code> in <code>./node_data</code> (specified by <code>--data-folder</code> argument).</li><li><code>./node_data/identities/</code> directory (create it if it does not exist).</li><li>PoS data in: <code>./data1/</code> and <code>./data2/</code> directories.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-new-identities-and-post-services">Adding New Identities And PoST Services<a href="#adding-new-identities-and-post-services" class="hash-link" aria-label="Direct link to Adding New Identities And PoST Services" title="Direct link to Adding New Identities And PoST Services">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="procedure-overview">Procedure Overview<a href="#procedure-overview" class="hash-link" aria-label="Direct link to Procedure Overview" title="Direct link to Procedure Overview">​</a></h3><p>Adding new identities and PoST services involves initializing PoST data for each new identity with specific parameters using <code>postcli</code>. This process generates a new private key, so a new identity.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-steps">Detailed Steps<a href="#detailed-steps" class="hash-link" aria-label="Direct link to Detailed Steps" title="Direct link to Detailed Steps">​</a></h3><ol><li><strong>Initialized PoST Data</strong> : We assume that the data is already initialized. If it is not the case yet then please visit <a href="https://docs.spacemesh.io/docs/start/smeshing/smeshing_adv/post_init" target="_blank" rel="noopener noreferrer">docs for that</a>.</li><li><strong>Store The Private Key</strong> : Upon initialization, <code>postcli</code> generates a new private key stored as <code>identity.key</code> in the PoST data directory. This key should then be moved to your <code>./node_data/identities/</code> directory, and renamed for unique identification.</li><li><strong>Configure The PoST Service</strong> : Set up the <code>post-service</code> with the newly initialized data, ensuring it is configured to connect to your node. This step integrates the new identity with your node&#x27;s operational framework.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-existing-identitiespost-services">Migrating Existing Identities/PoST Services<a href="#migrating-existing-identitiespost-services" class="hash-link" aria-label="Direct link to Migrating Existing Identities/PoST Services" title="Direct link to Migrating Existing Identities/PoST Services">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-strategy">Migration Strategy<a href="#migration-strategy" class="hash-link" aria-label="Direct link to Migration Strategy" title="Direct link to Migration Strategy">​</a></h3><p>Consolidating your Spacemesh identities/PoST services onto a single node streamlines operations and enhances efficiency. The key to a successful migration lies in safely transferring identity keys and PoST data to your chosen node, ensuring no identities are active on more than one node simultaneously to prevent equivocation (the act of a node signing two different blocks at the same layer, which is considered malicious) and being permanently banned and disqualified for rewards.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-by-step-migration">Step-By-Step Migration<a href="#step-by-step-migration" class="hash-link" aria-label="Direct link to Step-By-Step Migration" title="Direct link to Step-By-Step Migration">​</a></h3><ol><li><strong>Preparation</strong> : Before starting, stop all operations on your current nodes to ensure data integrity during the migration. Make sure that all nodes <em>were</em> running the latest version of Spacemesh newer or equal 1.4.0. This is crucial to avoid any potential issues with the migration process. Nodes that were running 1.3.x series <strong>only</strong> cannot be migrated directly.</li><li>Rename your source node&#x27;s <code>local.key</code> file to a more descriptive name, such as <code>my_super_secret_key.key</code>. This naming convention is for your convenience only. Ensure that on the target node, there is no file named <code>local.key</code>.</li><li>In the go-spacemesh release you&#x27;ll find <code>merge-nodes</code> tool. It is a tool that allows you to merge two or more nodes into one. Currently, it assumes all or nothing during merging.</li></ol><p>Run it with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./merge-nodes --from </span><span class="token operator">&lt;</span><span class="token plain">source_path</span><span class="token operator">&gt;</span><span class="token plain"> --to </span><span class="token operator">&lt;</span><span class="token plain">target_path</span><span class="token operator">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where: <code>source_path</code> is the path to the node data you want to merge from and <code>target_path</code> is the path to the node data you want to merge to.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>It is possible to merge nodes by hand too</p><ul><li>Locate the <code>identity.key</code> files within the PoST data directories of each node.</li><li>Copy these files to the <code>./node_data/identities</code> directory on the node you are consolidating to.</li><li>Rename the key files respectively for easy identification of each identity.</li><li>Run: <code>sqlite3 target_node.sql</code> where <code>target_node.sql</code> is the database file of the node you are consolidating to.</li></ul><div class="language-attach codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-attach codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">BEGIN;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into initial_post select * from srcDB.initial_post;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into challenge select * from srcDB.challenge;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into poet_registration select * from srcDB.poet_registration;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into nipost select * from srcDB.nipost;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COMMIT;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">detach srcDB;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, it is recommended only for advanced users as it does not cover all the corner cases and may lead to data corruption.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-post-services">Configure PoST Services<a href="#configure-post-services" class="hash-link" aria-label="Direct link to Configure PoST Services" title="Direct link to Configure PoST Services">​</a></h3><ul><li>For each identity, set up a PoST service that utilizes the existing PoST data linked to that identity. This ensures the node can continue participating in the network without redoing the PoST.</li><li>Detailed configuration steps can be found in the <code>post-service</code> <a href="https://github.com/spacemeshos/post-rs/blob/main/service/README.md" target="_blank" rel="noopener noreferrer">README</a>, guiding you through connecting each PoST service to your node.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operational-guide">Operational Guide<a href="#operational-guide" class="hash-link" aria-label="Direct link to Operational Guide" title="Direct link to Operational Guide">​</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This is just an example, in the real world you should use some kind of process manager like <code>systemd</code> or <code>supervisord</code> to manage your services. Or use some orchestration tool like <code>kubernetes</code> or <code>docker-compose</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="starting-and-stopping-post-services">Starting and Stopping PoST Services<a href="#starting-and-stopping-post-services" class="hash-link" aria-label="Direct link to Starting and Stopping PoST Services" title="Direct link to Starting and Stopping PoST Services">​</a></h3><p>For the prerequisites and initial setup, visit <code>post-service</code> <a href="https://github.com/spacemeshos/post-rs/blob/main/service/README.md" target="_blank" rel="noopener noreferrer">README</a>.</p><p>To start the PoST service, follow these steps:</p><ol><li><p>Create a directory for post-service and put there the most recent PoST <strong>service</strong> release from <a href="https://github.com/spacemeshos/post-rs" target="_blank" rel="noopener noreferrer">post-rs repository</a>.</p></li><li><p>Prepare command arguments. Remember to <code>cd</code> to the correct directory and <code>chmod</code> service file. Then you will need to run the PoST service with the following arguments:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./service --address</span><span class="token operator">=</span><span class="token plain">http://localhost:9094 --dir</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">/data1 --operator-address</span><span class="token operator">=</span><span class="token number">127.0</span><span class="token plain">.0.1:50051 --threads</span><span class="token operator">=</span><span class="token number">1</span><span class="token plain"> --nonces</span><span class="token operator">=</span><span class="token number">128</span><span class="token plain"> --randomx-mode</span><span class="token operator">=</span><span class="token plain">fast</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>--address</code>: Points to the node&#x27;s gRPC address. Ensure it matches the <code>grpc-post-listener</code> config option.</li><li><code>--dir</code>: Specifies the directory of PoST data. Adjust the path according to your setup.</li><li><code>--operator-address</code>: The address for the simple operator API. Change port numbers as needed for your environment.
If it is not specified, it will be disabled.</li><li><code>--threads</code>, <code>--nonces</code>, <code>--randomx-mode</code>: Configuration options specific to the PoST service, not the node.</li></ul></li><li><p>Enable debug logs (Optional): For additional logging, set the <code>RUST_LOG</code> environment variable to <code>DEBUG</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">export RUST_LOG=DEBUG</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Start the service: Run the command prepared in Step 2. Upon starting, the service will log its configuration and connection attempts to the node. Successful logs will look like this:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[INFO  service] POST proving settings: PostSettings { threads: 1, nonces: 128, randomx_mode: Fast }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[INFO  service] not configuring TLS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[DEBUG post_service::client] connecting to the node on http://localhost:10094/ (attempt 1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>These messages indicate that the PoST service is correctly configured and has started.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stopping-post-services">Stopping PoST Services<a href="#stopping-post-services" class="hash-link" aria-label="Direct link to Stopping PoST Services" title="Direct link to Stopping PoST Services">​</a></h3><p>To <strong>stop</strong> a PoST service, typically, you would terminate the process using your operating system&#x27;s standard procedure for stopping applications. For services running in a container or through a managed service, use the appropriate command or interface provided by the environment to safely stop the service. Otherwise, you can follow these steps:</p><ol><li><p>Identify the process: Use a process management command like <code>ps</code> to find the process ID (PID) of the PoST service. You can filter the results using <code>grep</code>:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ps aux | grep service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Terminate the process: Once you&#x27;ve identified the PID, use the <code>kill</code> command to stop the service:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">kill [PID]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>Replace <code>[PID]</code> with the actual process ID of your PoST service. If the service does not terminate gracefully, you can use <code>kill -9 [PID]</code> to force it to stop.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tips-and-best-practices">Tips And Best Practices<a href="#tips-and-best-practices" class="hash-link" aria-label="Direct link to Tips And Best Practices" title="Direct link to Tips And Best Practices">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-flexibility">Configuration Flexibility<a href="#configuration-flexibility" class="hash-link" aria-label="Direct link to Configuration Flexibility" title="Direct link to Configuration Flexibility">​</a></h4><p>You can adjust the PoST service configuration (e.g., <code>--threads</code>, <code>--nonces</code>, <code>--randomx-mode</code>) based on your hardware
capabilities and preferences.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-directories">Multiple Directories<a href="#multiple-directories" class="hash-link" aria-label="Direct link to Multiple Directories" title="Direct link to Multiple Directories">​</a></h4><p>If you have multiple <code>./dataN</code> directories, repeat the starting process for each, adjusting the <code>--dir</code> argument accordingly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-management">Service Management<a href="#service-management" class="hash-link" aria-label="Direct link to Service Management" title="Direct link to Service Management">​</a></h4><p>Feel free to start, stop, or restart PoST services whenever you need it. However, the node should remain running continuously for the system to function properly. Each PoST service exposes operator-api you can use it to query its state and to stop it.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Not doing anything</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">❯ curl http://localhost:50051/status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;Idle&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Proving</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">❯ curl http://localhost:50051/status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;Proving&quot;:{&quot;nonces&quot;:{&quot;start&quot;:0,&quot;end&quot;:128},&quot;position&quot;:0}}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Proving, read some data already</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">❯ curl http://localhost:50051/status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;Proving&quot;:{&quot;nonces&quot;:{&quot;start&quot;:0,&quot;end&quot;:128},&quot;position&quot;:10000}}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Started second pass</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">❯ curl http://localhost:50051/status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;Proving&quot;:{&quot;nonces&quot;:{&quot;start&quot;:128,&quot;end&quot;:256},&quot;position&quot;:10000}}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># Finished proving, but the node has not fetched the proof yet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">❯ curl http://localhost:50051/status</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;DoneProving&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>More info about operator API can be found in the <a href="https://github.com/spacemeshos/post-rs/blob/main/service/README.md#operator-api" target="_blank" rel="noopener noreferrer">post-rs repository</a>.</p><p>Before stopping a PoST service with <code>DoneProving</code> state you need to make sure that the node fetched the proof. You can check it by running <code>grpcurl</code> command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">grpcurl --plaintext localhost:9094 spacemesh.v1.PostInfoService.PostStates</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If a given PoST service is <code>PROVING</code> then you should NOT stop it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-the-setup">Verifying the Setup<a href="#verifying-the-setup" class="hash-link" aria-label="Direct link to Verifying the Setup" title="Direct link to Verifying the Setup">​</a></h3><p>After adding or migrating identities and PoST services, verify they are correctly connected to your node and eligible for rewards by monitoring the node&#x27;s Events. Look for indicators of successful identity recognition and PoST data validation. For example, you can list the Post states with:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">grpcurl --plaintext localhost:9094 spacemesh.v1.PostInfoService.PostStates</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>you can also query</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">grpcurl -plaintext </span><span class="token number">127.0</span><span class="token plain">.0.1:9093 spacemesh.v1.SmesherService.SmesherIDs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to list the configured SmesherIDs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-events">Node Events<a href="#node-events" class="hash-link" aria-label="Direct link to Node Events" title="Direct link to Node Events">​</a></h3><p>The <code>spacemesh.v1.AdminService.EventsStream</code> method has been extended with <code>smesher</code> field in the events. So, you are expected to see the event PER PoST service now.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">​</a></h3><p>The security of your private keys is fundamentally tied to the control and safety of your digital assets and your identity within the Spacemesh network and any mesh or blockchain ecosystem.</p><p>Given the significant risks associated with the exposure of private keys, it is crucial to take proactive measures to secure them. This includes:</p><ul><li><strong>Using Hardware Wallets:</strong> Hardware wallets are physical devices designed to securely store private keys offline, providing a high level of security against online attacks.</li><li><strong>Secure Storage Solutions:</strong> For backup, use encrypted storage solutions and consider distributing backups in secure locations to prevent loss from local disasters.</li><li><strong>Strong Access Controls:</strong> Implement strong access controls and use multi-factor authentication to protect any digital storage or interfaces that can access the private keys.</li><li><strong>Regular Security Reviews:</strong> Regularly review your security practices and stay informed about new threats and security solutions in the blockchain space.</li><li><strong>Regular Software Updates:</strong> Regularly check and upgrade your operating system, anti-malware programs, and of course, the Spacemesh software, making sure you always run the official, stable releases from trusted sources.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-tips">Troubleshooting Tips<a href="#troubleshooting-tips" class="hash-link" aria-label="Direct link to Troubleshooting Tips" title="Direct link to Troubleshooting Tips">​</a></h3><ul><li><strong>Check Configuration Files</strong>: Ensure all identity and service configurations are correctly set up.</li><li><strong>Review Logs For Errors</strong>: Any connectivity or initialization errors will be detailed in the node&#x27;s logs.</li><li><strong>Ensure Unique Operation</strong>: Running multiple nodes with the same identity can lead to issues. Verify that each
identity is only active on one node.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-configurations">Advanced Configurations<a href="#advanced-configurations" class="hash-link" aria-label="Direct link to Advanced Configurations" title="Direct link to Advanced Configurations">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="customizing-settings-for-optimal-performance">Customizing Settings For Optimal Performance<a href="#customizing-settings-for-optimal-performance" class="hash-link" aria-label="Direct link to Customizing Settings For Optimal Performance" title="Direct link to Customizing Settings For Optimal Performance">​</a></h4><p>As mentioned previously each PoST service accepts its own configuration. You can adjust the <code>--threads</code>, <code>--nonces</code>, and <code>--randomx-mode</code> based on your hardware capabilities and preferences.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="smart-orchestration-for-running-multiple-post-services">Smart Orchestration for Running Multiple PoST Services<a href="#smart-orchestration-for-running-multiple-post-services" class="hash-link" aria-label="Direct link to Smart Orchestration for Running Multiple PoST Services" title="Direct link to Smart Orchestration for Running Multiple PoST Services">​</a></h4><p>We have prepared a demonstration of how to operate multiple PoST services efficiently. You can access it <a href="https://github.com/spacemeshos/multiple_post_services_demo" target="_blank" rel="noopener noreferrer">here</a>. While it simplifies certain aspects, the emphasis is on showcasing the capabilities.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faqs">FAQs<a href="#faqs" class="hash-link" aria-label="Direct link to FAQs" title="Direct link to FAQs">​</a></h2><p><strong>Q: I Want To Generate More PoS Data. How Do I Add A New Identity To My Node?</strong></p><p>A: Initialize PoST data for the new identity using <code>postcli</code>, which will generate a new private key. Then, move the generated <code>identity.key</code> to your <code>data/identities</code> directory, ensuring it is uniquely named.</p><p><strong>Q: What Should I Do If I Encounter Errors During Identity Or PoST Service Setup?</strong></p><p>A: Check your configuration files for accuracy and review node logs for specific error messages. Ensure all paths and identifiers are correctly specified and that there is no overlap of identities across multiple nodes.</p><p><strong>Q: How do I verify that my PoST services are correctly set up and running?</strong></p><p>A: After adding or migrating identities and PoST services, verify that they are correctly connected to your node and eligible for rewards by monitoring the node&#x27;s Events and using <code>grpcurl</code> commands to list configured SmesherIDs and check PoST states.</p></div><div class="feedback-widget margin-top--md margin-bottom--md"><div class="margin-bottom--sm"><b>Was this helpful?</b></div><span class="feedback-widget-positive"><feedback-button project="nzs6xodw4b" rating="1" custom-font="True" button-style="default" modal-position="center"><button class="button button--outline button--primary button--sm" title="Yes"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg></button></feedback-button></span><span class="feedback-widget-negative margin-left--sm"><feedback-button project="nzs6xodw4b" rating="0" custom-font="True" button-style="default" modal-position="center"><button class="button button--outline button--primary button--sm" title="No"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path></svg></button></feedback-button></span></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/spacemeshos/docs/edit/main/docs/start/smeshing/smeshing_adv/post_1n.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/start/smeshing/smeshing_adv/advanced"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Additional Advanced Topics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/start/smeshing/smeshing_adv/multigpu"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Initializing a Subset of PoST Data With postcli</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#backup" class="table-of-contents__link toc-highlight">Backup</a></li><li><a href="#initial-setup-and-configuration" class="table-of-contents__link toc-highlight">Initial Setup And Configuration</a></li></ul></li><li><a href="#adding-new-identities-and-post-services" class="table-of-contents__link toc-highlight">Adding New Identities And PoST Services</a><ul><li><a href="#procedure-overview" class="table-of-contents__link toc-highlight">Procedure Overview</a></li><li><a href="#detailed-steps" class="table-of-contents__link toc-highlight">Detailed Steps</a></li></ul></li><li><a href="#migrating-existing-identitiespost-services" class="table-of-contents__link toc-highlight">Migrating Existing Identities/PoST Services</a><ul><li><a href="#migration-strategy" class="table-of-contents__link toc-highlight">Migration Strategy</a></li><li><a href="#step-by-step-migration" class="table-of-contents__link toc-highlight">Step-By-Step Migration</a></li><li><a href="#configure-post-services" class="table-of-contents__link toc-highlight">Configure PoST Services</a></li></ul></li><li><a href="#operational-guide" class="table-of-contents__link toc-highlight">Operational Guide</a><ul><li><a href="#starting-and-stopping-post-services" class="table-of-contents__link toc-highlight">Starting and Stopping PoST Services</a></li><li><a href="#stopping-post-services" class="table-of-contents__link toc-highlight">Stopping PoST Services</a></li></ul></li><li><a href="#tips-and-best-practices" class="table-of-contents__link toc-highlight">Tips And Best Practices</a><ul><li><a href="#general" class="table-of-contents__link toc-highlight">General</a><ul><li><a href="#configuration-flexibility" class="table-of-contents__link toc-highlight">Configuration Flexibility</a></li><li><a href="#multiple-directories" class="table-of-contents__link toc-highlight">Multiple Directories</a></li><li><a href="#service-management" class="table-of-contents__link toc-highlight">Service Management</a></li></ul></li><li><a href="#verifying-the-setup" class="table-of-contents__link toc-highlight">Verifying the Setup</a></li><li><a href="#node-events" class="table-of-contents__link toc-highlight">Node Events</a></li><li><a href="#security" class="table-of-contents__link toc-highlight">Security</a></li><li><a href="#troubleshooting-tips" class="table-of-contents__link toc-highlight">Troubleshooting Tips</a></li><li><a href="#advanced-configurations" class="table-of-contents__link toc-highlight">Advanced Configurations</a><ul><li><a href="#customizing-settings-for-optimal-performance" class="table-of-contents__link toc-highlight">Customizing Settings For Optimal Performance</a></li><li><a href="#smart-orchestration-for-running-multiple-post-services" class="table-of-contents__link toc-highlight">Smart Orchestration for Running Multiple PoST Services</a></li></ul></li></ul></li><li><a href="#faqs" class="table-of-contents__link toc-highlight">FAQs</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/teamspacemesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/spacemeshos/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://spacemesh.io/resources" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dash.spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dashboard</a></li><li class="footer__item"><a href="https://explorer.spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Spacemesh.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e05d585a.js"></script>
<script src="/assets/js/main.7fb6dc6c.js"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","nzs6xodw4b"),feedbackButton.setAttribute("modal-position","bottom-right"),feedbackButton.setAttribute("button-style","light"),feedbackButton.setAttribute("button-position","bottom-right"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script></body>
</html>