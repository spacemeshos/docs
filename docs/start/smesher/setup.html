<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-start/smesher/setup">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Advanced Setup | Spacemesh Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.spacemesh.io/docs/start/smesher/setup"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Advanced Setup | Spacemesh Documentation"><meta data-rh="true" name="description" content="Compiling"><meta data-rh="true" property="og:description" content="Compiling"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.spacemesh.io/docs/start/smesher/setup"><link data-rh="true" rel="alternate" href="https://docs.spacemesh.io/docs/start/smesher/setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.spacemesh.io/docs/start/smesher/setup" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://OGGMN1SAN3-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Spacemesh Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Spacemesh Documentation Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Spacemesh Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.156c16b2.css">
<link rel="preload" href="/assets/js/runtime~main.f4f990db.js" as="script">
<link rel="preload" href="/assets/js/main.16a6fb1c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/learn/spacemesh">Learn About Spacemesh</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/start">Hands-On Guides</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start/requirements">System Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start/netconfig">Network Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/start/rewards">How Rewards Work</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/start/smapp/install">Smapp Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/start/smesher/setup">Advanced Smesher Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/start/smesher/setup">Advanced Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/post_init">PoST Initialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/api">API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/poet">PoET Servers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/performance">Fine-Tuning Node Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/equivocation">Avoiding Equivocation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/advanced">Additional Advanced Topics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/start/smesher/troubleshooting">Troubleshooting</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Advanced Smesher Guide</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced Setup</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Advanced Setup</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compiling">Compiling<a href="#compiling" class="hash-link" aria-label="Direct link to Compiling" title="Direct link to Compiling">​</a></h2><p>go-spacemesh has a very limited set of dependencies and requirements, the main one being a Go toolchain. It also requires <code>make</code> and <a href="https://docs.github.com/en/repositories/working-with-files/managing-large-files/installing-git-large-file-storage" target="_blank" rel="noopener noreferrer">Git Large File Storage</a>. Make sure you have a <a href="https://go.dev/dl/" target="_blank" rel="noopener noreferrer">recent version of Go</a> installed, clone the <a href="https://github.com/spacemeshos/go-spacemesh" target="_blank" rel="noopener noreferrer">go-spacemesh repository</a>, then run <code>make install</code>, which will install the other dependencies for you automatically. Note that this includes a compiled version of the Spacemesh PoST library, but as long as your Go toolchain is set up correctly, this should work out of the box.</p><p>You can see the minimum required version of Go in a few places including <a href="https://github.com/spacemeshos/go-spacemesh/blob/989682a9f574e9860912287634a47bb0db2d0640/go.mod#L3" target="_blank" rel="noopener noreferrer"><code>go.mod</code></a> and the <a href="https://github.com/spacemeshos/go-spacemesh/blob/989682a9f574e9860912287634a47bb0db2d0640/README.md?plain=1#L89" target="_blank" rel="noopener noreferrer">README</a>.</p><p>Assuming you intend to run your node on mainnet, <strong>make certain that you compile using the tag that matches the <a href="https://github.com/spacemeshos/go-spacemesh/releases" target="_blank" rel="noopener noreferrer">latest release</a></strong>, e.g.:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone --depth </span><span class="token number">1</span><span class="token plain"> --branch v1.1.1 https://github.com/spacemeshos/go-spacemesh.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> build</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This builds the <code>go-spacemesh</code> binary in the <code>build/</code> directory.</p><p>For the most up to date information on compiling check the <a href="https://github.com/spacemeshos/go-spacemesh#readme" target="_blank" rel="noopener noreferrer">README</a>, <a href="https://github.com/spacemeshos/go-spacemesh/blob/develop/Makefile" target="_blank" rel="noopener noreferrer">Makefile</a> and <a href="https://github.com/spacemeshos/go-spacemesh/blob/develop/Makefile-libs.Inc" target="_blank" rel="noopener noreferrer">Makefile-libs</a>, and the <a href="https://github.com/spacemeshos/go-spacemesh/blob/develop/.github/workflows/release.yml" target="_blank" rel="noopener noreferrer">release workflow</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running">Running<a href="#running" class="hash-link" aria-label="Direct link to Running" title="Direct link to Running">​</a></h2><p>The node features a set of reasonable default parameters that should work well out of the box for most users and most use cases, but you can change all of them using command line flags and/or the config file. The exact command you use to run <code>go-spacemesh</code> will depend upon your local configuration and requirements. See the <a href="https://github.com/spacemeshos/go-spacemesh#readme" target="_blank" rel="noopener noreferrer">README</a> and run <code>go-spacemesh -h</code> for the full list of arguments:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> go-spacemesh -h</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">start </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">flags</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token function" style="color:rgb(80, 250, 123)">node</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">command</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Available Commands:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  completion  Generate the autocompletion script </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> the specified shell</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">help</span><span class="token plain">        Help about any </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">command</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  version     Show version info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Flags:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -a, --accounts </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">string</span><span class="token operator">=</span><span class="token plain">uint64                        List of prefunded accounts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --advertise-address string                      libp2p address with identity </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">example: /dns4/bootnode.spacemesh.io/tcp/5003</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-first-voting-round-duration duration   First voting round duration </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> milliseconds </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default 30m0s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-grace-period-duration duration         Grace period duration </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> milliseconds </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default 10m0s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-kappa int                              Security parameter </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">for calculating ATX threshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default </span><span class="token number">40</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-proposal-duration duration             Proposal duration </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> milliseconds </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default 4m0s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-q *big.Rat                             Ratio of dishonest spacetime </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">for calculating ATX threshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">. It should be a string representing a rational number. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default </span><span class="token number">1</span><span class="token plain">/3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-rounds-number uint32                   Amount of rounds </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> every epoch </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default </span><span class="token number">300</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-sync-weight-units int                  Numbers of weight </span><span class="token function" style="color:rgb(80, 250, 123)">units</span><span class="token plain"> to </span><span class="token function" style="color:rgb(80, 250, 123)">wait</span><span class="token plain"> before determining beacon values from them. </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default </span><span class="token number">800</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-theta *big.Rat                         Ratio of votes </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> reaching consensus </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default </span><span class="token number">1</span><span class="token plain">/4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      --beacon-votes-limit uint32                     Maximum allowed number of votes to be sent </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">default </span><span class="token number">100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Assuming everything else is set up correctly in your config file (see next section), the only CLI flag you need is to specify the location of the config file, e.g.:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> go-spacemesh -c node-config.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring">Configuring<a href="#configuring" class="hash-link" aria-label="Direct link to Configuring" title="Direct link to Configuring">​</a></h2><p>The node currently does not need any config to run with mainnet. You can however request the config and override any needed value. To request the current mainnet compatible config please run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> -s https://configs.spacemesh.network/networks.json </span><span class="token operator">|</span><span class="token plain"> jq </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;.[0].conf&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://configs.spacemesh.network/config.mainnet.json&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Most users will want to start with the existing network config file as a template and add customizations to match their local environment and preferences. Note that <strong>it&#x27;s essential you not change existing config parameters unless you know what you&#x27;re doing.</strong> Some config sections, like <code>genesis</code>, must not be changed under any circumstances or <strong>your node will not be compatible with mainnet.</strong> Your messages will be dropped and your node may be banned by its peers. Some, like <code>p2p</code> and <code>smeshing</code>, may be tweaked by power users who know what they&#x27;re doing, but can also cause problems for your node. Others such as <code>api</code> and <code>logging</code> are safe to change. When in doubt, <a href="https://chat.spacemesh.io" target="_blank" rel="noopener noreferrer">ask for help</a>!</p><p>Assuming you&#x27;re starting with the default network config file, you&#x27;ll want to add something like the following to start smeshing:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;smeshing&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;smeshing-opts&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;smeshing-opts-datadir&quot;: &quot;/data/post/7c8cef2b/&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;smeshing-opts-maxfilesize&quot;: 4294967296,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;smeshing-opts-numunits&quot;: 15</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;smeshing-proving-opts&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;smeshing-opts-proving-nonces&quot;: 144,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;smeshing-opts-proving-threads&quot;: 0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;smeshing-coinbase&quot;: &quot;&lt;your coinbase here&gt;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;smeshing-start&quot;: true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For more information on choosing the <code>smeshing-opts</code> and <code>smeshing-proving-opts</code>, see <a href="#fine-tuning-proving">fine-tuning proving</a>, <a href="https://github.com/spacemeshos/post/tree/develop/cmd/postcli" target="_blank" rel="noopener noreferrer">the postcli README</a> and <a href="https://github.com/spacemeshos/post-rs/blob/main/docs/profiler.md" target="_blank" rel="noopener noreferrer">the profiler README</a>, respectively, and the sections below on these topics.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="coinbase">Coinbase<a href="#coinbase" class="hash-link" aria-label="Direct link to Coinbase" title="Direct link to Coinbase">​</a></h3><p>The coinbase account (specified in the config, above, as <code>smeshing-coinbase</code>) is the account that will receive the rewards from smeshing. The coinbase account is fixed per smesher, per epoch, as the smesher commits to it in an ATX for an entire epoch. However, it can be changed at any time, and the change will take effect in the epoch that the next published ATX targets. Note that many smeshers can also use the same coinbase (although to do so would reduce privacy since those smeshers could be associated via the shared coinbase address), and also that there&#x27;s no requirement that a smesher even provide a coinbase that they control. In theory the coinbase could be set to someone else&#x27;s account, or even to a burn account.</p><p>The simplest way to generate a coinbase account is to install and open <a href="https://github.com/spacemeshos/smapp/releases" target="_blank" rel="noopener noreferrer">Smapp</a>; it&#x27;ll automatically generate a new account the first time it&#x27;s opened, assuming one doesn&#x27;t already exist (make sure to backup the recovery mnemonic!).</p><p>If you prefer you can use the <a href="https://github.com/spacemeshos/smcli" target="_blank" rel="noopener noreferrer"><code>smcli</code> tool</a> to generate and display a new wallet containing one or more accounts from the command line. See the README in that repository for more information on the tool.</p><p>Either way, you should now have a Spacemesh-compatible address in bech32 format that starts with <code>sm1</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-nodes">Multiple nodes<a href="#multiple-nodes" class="hash-link" aria-label="Direct link to Multiple nodes" title="Direct link to Multiple nodes">​</a></h3><p>It&#x27;s possible to run multiple <code>go-spacemesh</code> processes on a single system. This is of course subject to the <a href="https://docs.spacemesh.io/docs/start/requirements" target="_blank" rel="noopener noreferrer">resource requirements</a> outlined above; in particular, make sure that the system has high enough bandwidth to support many nodes. You&#x27;ll need to change a few parameters to enable this:</p><ol><li>Node data directory: each node must have its own data directory to store network state. Specify it on the command line using the <code>-d datadir</code> flag or in the config in <code>{&quot;main&quot;:{&quot;data-folder&quot;:&quot;&lt;node-data-location&gt;&quot;}}</code>.</li><li>Smeshing data directory: each smeshing node must point to a different PoST data directory. Specify in the config using <code>{&quot;smeshing&quot;:{&quot;smeshing-opts&quot;:{&quot;smeshing-opts-datadir&quot;:&quot;&lt;post-data-location&gt;&quot;}}}</code>. <strong>See note below about avoiding equivocation!</strong></li><li>Lockfile: each running node must specify a different lockfile. Specify it on the command line using <code>--filelock</code> or in the config with <code>{&quot;main&quot;:{&quot;filelock&quot;:&quot;&lt;lock-file-location&gt;&quot;}}</code>, e.g. <code>/tmp/go-spacemesh-01.lock</code>.</li><li>GRPC API ports: assuming you have GRPC enabled, each running node must use a different set of ports for the public and private GRPC services. Specify them in the config with <code>{&quot;api&quot;:{&quot;grpc-public-listener&quot;:&quot;&lt;ip_addr&gt;:&lt;port&gt;&quot;,&quot;grpc-private-listener&quot;:&quot;&lt;ip_addr&gt;:&lt;port&gt;&quot;}}&quot;</code>. Use <code>&quot;0.0.0.0&quot;</code> to listen on all interfaces, or specify an IP address attached to a particular interface. See next section for more information on the API and the difference between public and private services.</li><li>P2P listen port: you can specify a different port for each node using the <code>--listen</code> CLI flag or in the config file using <code>&quot;p2p&quot;: {&quot;listen&quot;: &quot;/ip4/0.0.0.0/tcp/6100&quot;}</code>.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-service-on-linux">System Service on Linux<a href="#system-service-on-linux" class="hash-link" aria-label="Direct link to System Service on Linux" title="Direct link to System Service on Linux">​</a></h2><p>On compatible Linux-based systems, we strongly recommend running <code>go-spacemesh</code> as a <a href="https://linuxhandbook.com/create-systemd-services/" target="_blank" rel="noopener noreferrer">systemd service</a>. This makes log management easier, and it ensures that the node will automatically restart if it dies or is killed, and that it automatically starts when the system is restarted. Each Linux distribution is different, so please check the documentation for your distribution to determine precisely where to create the service file. On most distributions the file should live in <code>/etc/systemd/system</code>. Here&#x27;s a sample service file - please read the <a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html" target="_blank" rel="noopener noreferrer">systemd documentation</a> for more information and update paths, users, etc. to suit your particular system:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Description=go-spacemesh (Mainnet)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Wants=network-online.target</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">After=network-online.target</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">StartLimitIntervalSec=60</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">StartLimitBurst=5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">User=spacemesh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Group=spacemesh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RestartSec=5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ExecStart=go-spacemesh -c /home/spacemesh/node-config.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the service file in place, assuming it&#x27;s called <code>spacemesh.service</code>, you simply need to run the following commands to enable and start it:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl daemon-reload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> spacemesh.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can then view the logs of the running service by running:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> journalctl --unit spacemesh -f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="parallel-initialization">Parallel Initialization<a href="#parallel-initialization" class="hash-link" aria-label="Direct link to Parallel Initialization" title="Direct link to Parallel Initialization">​</a></h2><p>While by default initialization occurs using a single GPU, it&#x27;s possible to initialize a single identity using many GPUs in parallel, on a single system or on multiple systems. This can be done using <code>postcli</code>: specify the desired number of units, count the total number of init files, then initialize a subset on each GPU/each system, e.g.:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./postcli -numUnits </span><span class="token number">100</span><span class="token plain"> -printNumFiles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1600</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On Machine A:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./postcli -numUnits </span><span class="token number">100</span><span class="token plain"> -id </span><span class="token operator">&lt;</span><span class="token plain">id</span><span class="token operator">&gt;</span><span class="token plain"> -commitmentAtxId </span><span class="token operator">&lt;</span><span class="token plain">id</span><span class="token operator">&gt;</span><span class="token plain"> -toFile </span><span class="token number">799</span><span class="token plain"> -datadir ./dataA</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On Machine B:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./postcli -numUnits </span><span class="token number">100</span><span class="token plain"> -id </span><span class="token operator">&lt;</span><span class="token plain">id</span><span class="token operator">&gt;</span><span class="token plain"> -commitmentAtxId </span><span class="token operator">&lt;</span><span class="token plain">id</span><span class="token operator">&gt;</span><span class="token plain"> -fromFile </span><span class="token number">800</span><span class="token plain"> -datadir ./dataB</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When combining the files, care must be taken to manually merge the metadata contained in the <code>post_metadata.json</code> files since each will contain a different nonce value and the smallest nonce must be chosen. For the same reason we strongly recommend that you not perform initialization <strong>using multiple GPUs on a single system using the same PoST data directory,</strong> because the nonces found by one process will be overwritten by those found by another.</p><p>See <a href="https://github.com/spacemeshos/post/tree/develop/cmd/postcli" target="_blank" rel="noopener noreferrer">the postcli README</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-drives">Multiple Drives<a href="#multiple-drives" class="hash-link" aria-label="Direct link to Multiple Drives" title="Direct link to Multiple Drives">​</a></h2><p>At present it&#x27;s not possible to naively split a single identity across multiple drives or filesystems. We hope to add this feature soon. In the meantime you have two possibilities: run multiple identities, or join multiple filesystems into a single logical filesystem at the hardware or OS level.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-identities">Multiple Identities<a href="#multiple-identities" class="hash-link" aria-label="Direct link to Multiple Identities" title="Direct link to Multiple Identities">​</a></h3><p>Running multiple identities is explained in <a href="#identity-management">Identity Management</a> and <a href="#multiple-nodes">Multiple Nodes</a>. This has the advantage that you don&#x27;t need to mess with your filesystem configuration at all, and that you can <a href="#post-initialization-2">initialize</a> and <a href="#proof-generation">generate proofs</a> for each identity more easily in parallel. It has the downside that you need to run multiple nodes, which will consume multiples of the <a href="#requirements">required resources</a> that a single node consumes. Also, since it&#x27;s in the interest of the network to reduce the number of identities as much as possible, we&#x27;ll be adding incentives for larger ATXs (generated by larger identities) and disincentives for many small ATXs. Please bear this in mind when you decide how many identities to run.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="joining-filesystems">Joining Filesystems<a href="#joining-filesystems" class="hash-link" aria-label="Direct link to Joining Filesystems" title="Direct link to Joining Filesystems">​</a></h3><p>There are many ways to combine multiple, physical filesystems into a single &quot;logical&quot; filesystem and the best way to do this will depend on your hardware, your operating systems, you degree of technical expertise, and your needs. Some miners have had success with <a href="https://en.wikipedia.org/wiki/Standard_RAID_levels#RAID_5" target="_blank" rel="noopener noreferrer">RAID5</a>; bear in mind that it&#x27;s possible to run RAID in either <a href="https://www.techtarget.com/searchstorage/tip/Key-differences-in-software-RAID-vs-hardware-RAID" target="_blank" rel="noopener noreferrer">hardware or software</a>, with various tradeoffs. Linux users can rely on <a href="https://en.wikipedia.org/wiki/Logical_Volume_Manager_(Linux)" target="_blank" rel="noopener noreferrer">LVM</a>, which has wide support in modern distributions.</p><p>This has the advantage that you can run a single node, rather than many, and that, if configured correctly, you may achieve much faster read speed (see <a href="#very-large-identities">Very Large Identities</a>) than you can with a single drive. It has the disadvantage of requiring more configuring at the operating system and filesystem level; miners who aren&#x27;t comfortable doing so may prefer to instead run multiple identities.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-managament">State Managament<a href="#state-managament" class="hash-link" aria-label="Direct link to State Managament" title="Direct link to State Managament">​</a></h2><p>The node stores all of the network state in a <a href="https://www.sqlite.org/index.html" target="_blank" rel="noopener noreferrer">SQLite</a> database called <code>state.sql</code> (along with a couple of auxiliary files) in the node&#x27;s data directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ls</span><span class="token plain"> -1 data/7c8cef2b/state.*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data/7c8cef2b/state.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data/7c8cef2b/state.sql-shm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data/7c8cef2b/state.sql-wal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s possible to explore the contents of this database to understand a node&#x27;s view of the network, especially when the desired data isn&#x27;t available via the API. First, two important notes about working with the state database:</p><p><strong>Note 1: Unlike the API, we make no guarantees that the state database schema will remain the same.</strong> It will likely evolve over time. Thus, while it&#x27;s perfectly okay to explore the state database for troubleshooting, we strongly recommend against building or deploying any production applications that rely on it.</p><p><strong>Note 2: Never, under any circumstances, modify the state of a running node.</strong> Making even a small change runs the risk of totally corrupting the state database, which in the worst case would require that a node be resynced from scratch, a process that can take a long time (and during which time a miner node isn&#x27;t eligible for rewards). As such, before even opening the state database, <strong>make a copy of the file</strong> and work with the copy only to make sure you don&#x27;t accidentally modify the live database.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reading-the-state-database">Reading the State Database<a href="#reading-the-state-database" class="hash-link" aria-label="Direct link to Reading the State Database" title="Direct link to Reading the State Database">​</a></h3><p>There are multiple ways to read data from a SQLite database. We recommend either using the official <a href="https://sqlite.org/cli.html" target="_blank" rel="noopener noreferrer"><code>sqlite3</code></a> program, or else the cross-platform, open source UI alternative <a href="https://sqlitebrowser.org/" target="_blank" rel="noopener noreferrer">DB Browser</a>. If you open the state database in the DB Browser you should see something like the following:</p><p><img loading="lazy" src="https://github.com/spacemeshos/wiki/assets/3316532/ad3eb4f3-af7b-49eb-8842-f46fe707f545" alt="image" class="img_ev3q"></p><p>The full extent of queries you can run against this database is beyond the scope of this document, but as a simple example, here&#x27;s how you&#x27;d look up the coinbase associated with a given smesher, and thus find that smesher&#x27;s rewards using the coinbase:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">DISTINCT</span><span class="token plain"> HEX</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">coinbase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> atxs </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> HEX</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;F353545DB955F5A359F406ACAB847408D40530A6782BE436553FE521033A42EC&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">000000006</span><span class="token plain">EE7C594D665EABFD653CF6920C7E24A3B8562C7</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SELECT</span><span class="token plain"> layer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> total_reward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FROM</span><span class="token plain"> rewards </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">WHERE</span><span class="token plain"> HEX</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">coinbase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;000000006EE7C594D665EABFD653CF6920C7E24A3B8562C7&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">8090</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">266137048118</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backing-up-state">Backing up State<a href="#backing-up-state" class="hash-link" aria-label="Direct link to Backing up State" title="Direct link to Backing up State">​</a></h3><p>It can be helpful to create snapshots or backup versions of a node&#x27;s state so that data may be restored more quickly in case of corruption or failure (rather than needing to resync from scratch, which is time consuming). This process is very straightforward: just create a copy of the files shown above, i.e., the <code>state.*</code> files inside the node&#x27;s data directory.</p><p>Due to SQLite&#x27;s <a href="https://www.sqlite.org/atomiccommit.html" target="_blank" rel="noopener noreferrer">atomic commit</a> feature it shouldn&#x27;t be necessary to stop the node before taking a snapshot, but if you want to be extra careful you may do so.</p><p>Also note that <a href="https://serverfault.com/questions/307296/which-filesystems-offer-snapshot-functionality-for-users-to-recover-data" target="_blank" rel="noopener noreferrer">certain filesystems</a> make snapshotting easier or even automatic.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clearing-state">Clearing State<a href="#clearing-state" class="hash-link" aria-label="Direct link to Clearing State" title="Direct link to Clearing State">​</a></h3><p>From time to time, such as if the state database becomes corrupt or if you simply want to resync your node from genesis, it becomes necessary to clear the state entirely. In order to do this, you should:</p><ol><li>Stop the node. Ensure that it&#x27;s exited cleanly and completely.</li><li>Remove the files shown above, i.e., the <code>state.*</code> files inside the node&#x27;s data directory. Note: don&#x27;t remove the other contents of the data directory as it also contains, e.g., P2P data.</li><li>Restart the node. You should see it begin to sync from genesis.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="copying-state">Copying State<a href="#copying-state" class="hash-link" aria-label="Direct link to Copying State" title="Direct link to Copying State">​</a></h3><p>There&#x27;s no &quot;private&quot; data, i.e., data that&#x27;s specific to one miner or one node, in the state database. This means that you can copy one trusted node&#x27;s database to another node as a quick-and-dirty &quot;quick sync&quot; option, rather than letting the nodes sync the old fashioned way. To do this:</p><ol><li>Make sure both nodes are running the same version of go-spacemesh.</li><li>Stop <strong>both nodes.</strong> Ensure that they&#x27;ve exited cleanly and completely.</li><li>Remove the state files entirely from node B, i.e., the destination node, by following the instructions above.</li><li>Copy the same files, i.e., the <code>state.*</code> files inside the data directory of node A (i.e., the source node) to the data directory of node B. It&#x27;s safe to do this from one system to another even if the two systems are on different architectures or different operating systems.</li><li>Restart both nodes.</li></ol><p>Note: by directly copying the state database you bypass the protections in the protocol and the node that would prevent your node from accepting bad state or bad transactions. For this reason it&#x27;s essential that you <strong>only copy the state from a trusted node,</strong> i.e., a node that you run yourself, and that you <strong>never blindly accept state data from a third party.</strong> Otherwise, you may end up with corrupt or incorrect state.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/start/smapp/net-dash"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Network and Dashboard</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/start/smesher/post_init"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PoST Initialization</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#compiling" class="table-of-contents__link toc-highlight">Compiling</a></li><li><a href="#running" class="table-of-contents__link toc-highlight">Running</a></li><li><a href="#configuring" class="table-of-contents__link toc-highlight">Configuring</a><ul><li><a href="#coinbase" class="table-of-contents__link toc-highlight">Coinbase</a></li><li><a href="#multiple-nodes" class="table-of-contents__link toc-highlight">Multiple nodes</a></li></ul></li><li><a href="#system-service-on-linux" class="table-of-contents__link toc-highlight">System Service on Linux</a></li><li><a href="#parallel-initialization" class="table-of-contents__link toc-highlight">Parallel Initialization</a></li><li><a href="#multiple-drives" class="table-of-contents__link toc-highlight">Multiple Drives</a><ul><li><a href="#multiple-identities" class="table-of-contents__link toc-highlight">Multiple Identities</a></li><li><a href="#joining-filesystems" class="table-of-contents__link toc-highlight">Joining Filesystems</a></li></ul></li><li><a href="#state-managament" class="table-of-contents__link toc-highlight">State Managament</a><ul><li><a href="#reading-the-state-database" class="table-of-contents__link toc-highlight">Reading the State Database</a></li><li><a href="#backing-up-state" class="table-of-contents__link toc-highlight">Backing up State</a></li><li><a href="#clearing-state" class="table-of-contents__link toc-highlight">Clearing State</a></li><li><a href="#copying-state" class="table-of-contents__link toc-highlight">Copying State</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://chat.spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/teamspacemesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/spacemeshos/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://spacemesh.io/resources" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Network</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dash.spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Dashboard</a></li><li class="footer__item"><a href="https://explorer.spacemesh.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Explorer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Spacemesh.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f4f990db.js"></script>
<script src="/assets/js/main.16a6fb1c.js"></script>
</body>
</html>