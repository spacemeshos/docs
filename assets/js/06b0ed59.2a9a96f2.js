"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4309],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),d=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=d(n),m=a,c=h["".concat(l,".").concat(m)]||h[m]||p[m]||o;return n?i.createElement(c,r(r({ref:t},u),{},{components:n})):i.createElement(c,r({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var d=2;d<o;d++)r[d]=n[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},7071:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var i=n(7462),a=(n(7294),n(3905));const o={id:"start",title:"Getting Started"},r="Requirements",s={unversionedId:"start/start",id:"start/start",title:"Getting Started",description:"Resource requirements for mining in Spacemesh can be broken down into three categories: those for running a full node, which are required for all nodes regardless of whether or not they're mining; those required for the PoST initialization process that's required before mining starts; and those required for ongoing mining.",source:"@site/docs/start/start.md",sourceDirName:"start",slug:"/start/",permalink:"/docs/start/",draft:!1,tags:[],version:"current",frontMatter:{id:"start",title:"Getting Started"},sidebar:"start",next:{title:"System Requirements",permalink:"/docs/start/requirements"}},l={},d=[{value:"Full Node",id:"full-node",level:2},{value:"PoST Initialization",id:"post-initialization",level:2},{value:"Ongoing Mining",id:"ongoing-mining",level:2},{value:"<code>commitmentAtxId</code>",id:"commitmentatxid",level:2},{value:"Smapp",id:"smapp",level:2},{value:"CLI",id:"cli",level:3},{value:"General Smesher Guide",id:"general-smesher-guide",level:2}],u={toc:d};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"requirements"},"Requirements"),(0,a.kt)("p",null,"Resource requirements for mining in Spacemesh can be broken down into three categories: those for running a full node, which are required for all nodes regardless of whether or not they're mining; those required for the PoST initialization process that's required before mining starts; and those required for ongoing mining."),(0,a.kt)("h2",{id:"full-node"},"Full Node"),(0,a.kt)("p",null,"See the official set of ",(0,a.kt)("a",{parentName:"p",href:"start/requirements"},"system requirements & recommended hardware"),". Resource requirements for running a node are quite modest: an Intel or ARM CPU, a modern operating system, a few dozen GB of free hard disk space, and a reliable broadband Internet connection."),(0,a.kt)("p",null,"The biggest resource consumed by a Spacemesh node is bandwidth. A full node currently consumes between 150-1500mb/hour of bandwidth. The node is quiescent most of the time, consuming only 100-300kbit/s, but spikes as high as 35Mbit/s every few minutes when a new layer appears and network traffic increases (Hare messages, proposals, etc.). Bandwidth is variable and depends heavily on the network condition and the number and quality of one's peers."),(0,a.kt)("p",null,"It's important that a node be run on an ",(0,a.kt)("strong",{parentName:"p"},"unmetered Internet connection")," or bandwidth charges will add up quickly."),(0,a.kt)("p",null,"We have plans to drastically reduce bandwidth consumption via a more efficient Hare protocol and other improvements, but these upgrades aren't finished and aren't scheduled yet."),(0,a.kt)("p",null,"As of epoch 5, a full node requires around 1.6gb to store the state database (note that versions of ",(0,a.kt)("inlineCode",{parentName:"p"},"go-spacemesh")," prior to v1.2.0 consumed significantly more hard disk space). We strongly recommend storing the node state (i.e., the ",(0,a.kt)("inlineCode",{parentName:"p"},"data-folder"),") on a fast drive such as a SSD, as opposed to a HDD, to ensure that disk throughput doesn't limit the node's ability to keep up with the network."),(0,a.kt)("h2",{id:"post-initialization"},"PoST Initialization"),(0,a.kt)("p",null,"PoST init is designed to be done with a GPU. It can be done with a CPU, but it will be orders of magnitude slower. The newer and faster the GPU, the faster the initialization process."),(0,a.kt)("p",null,"As a benchmark, the minimum PoST data size (256GiB, or 4 storage units) can be initialized in 8-10 hours using a single Nvidia GeForce RTX 4090. The same data would take around 36 hours using a Nvidia GeForce RTX 3060. Initialization time scales linearly, so that initializing 40 SU would take 10x as long as initializing 4 SU."),(0,a.kt)("p",null,"Note that initialization can be parallelized across multiple systems or multiple GPUs, and it can be performed on one system (including in the cloud) and the resultant data moved to another system (e.g., one without a GPU) for long-term storage and mining. There's more information on this below."),(0,a.kt)("h2",{id:"ongoing-mining"},"Ongoing Mining"),(0,a.kt)("p",null,"Mining on an ongoing basis does ",(0,a.kt)("em",{parentName:"p"},"not")," require a GPU. The only additional resource consideration for mining, beyond the baseline cost of running a full node (as outlined above), is the cost of generating a ",(0,a.kt)("a",{parentName:"p",href:"#proof-of-space"},"proof of space")," once per epoch. The time required to generate a proof is complicated and multivariate, depending on several factors including CPU speed, disk speed, size of PoST data, and the ",(0,a.kt)("inlineCode",{parentName:"p"},"smeshing-proving-opts")," settings specified in config (more on this below)."),(0,a.kt)("p",null,"The general requirement is a modern CPU with the ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/AES_instruction_set"},"AES-NI")," instruction and a disk that's fast enough to perform a single, sequential read over the entire PoST data in 4-5 hours. This allows enough time to perform a second read during the PoET cycle gap on the off chance that the first pass fails to generate a valid proof. Hard drive performance varies widely but most modern 7200 RPM HDDs can perform a sequential read at 100-200mb/sec (5400 RPM drives are slower). This means that, to be safe, a smesher shouldn't initialize more than 2-4 TB or 8-16 SU on a single HDD. It's certainly possible to initialize more and smeshers with 4TB drives and fast CPUs report no issues generating a proof in time, but the probability of failure increases with each additional byte initialized. It's also possible to achieve much higher read speeds using more expensive technology such as SSD and/or RAID."),(0,a.kt)("p",null,"For much more information see ",(0,a.kt)("a",{parentName:"p",href:"#fine-tuning-proving"},"fine-tuning proving")," and ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spacemeshos/post-rs/blob/main/docs/profiler.md"},"the profiler tool")," which can be used to benchmark one's hardware."),(0,a.kt)("h1",{id:"getting-started"},"Getting Started"),(0,a.kt)("p",null,"Now that you have the necessary resources ready, it's time to start smeshing! This section will walk you through how to do that. First a couple quick notes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"this guide is intended as an advanced smeshing guide, covering cases such as parallel init, cloud GPUs, and transferring and managing multiple identities. In particular it does not cover the baseline case of using Smapp to initialize a single smesher. That process is straightforward and mostly automated in Smapp, and the steps are outlined in this ",(0,a.kt)("a",{parentName:"li",href:"https://youtu.be/xwsg7FzuBE0?si=Eing6i_KY7VSE7W4"},"explainer video"),". The guide does explain the differences between mining using Smapp or the CLI where appropriate."),(0,a.kt)("li",{parentName:"ul"},"the author of this guide uses Linux and CLI commands will be specified as they'd be run on Linux. In most cases, the same commands should work verbatim on other platforms including Windows and macOS with appropriate tweaks (e.g., using the correct platform-specific paths). Contributions containing correct instructions for different platforms are welcome; feel free to ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/spacemeshos/wiki/issues"},"open an issue")," with a contribution.")),(0,a.kt)("h1",{id:"running-a-node"},"Running a Node"),(0,a.kt)("p",null,"In order to mine one must have a fully synchronized Spacemesh node running. Strictly speaking, running a node is not required during the PoST initialization process, since it relies only upon static data (with one exception, explained in a moment) such as the smesher's identity and the PoST init params (total storage to initialize, max file size, etc.). Most smeshers nevertheless choose to run a full node throughout the init process for several reasons: the node itself can perform the initialization for you, it means you'll have a fully-synchronized node when the init finishes and smeshing begins (with the opportunity to troubleshoot any issues in the interim), and it means you'll have a trustless copy of the highest ",(0,a.kt)("inlineCode",{parentName:"p"},"commitmentAtxId"),"."),(0,a.kt)("h2",{id:"commitmentatxid"},(0,a.kt)("inlineCode",{parentName:"h2"},"commitmentAtxId")),(0,a.kt)("p",null,"The one piece of dynamic data that you need to perform PoST init is the highest ",(0,a.kt)("inlineCode",{parentName:"p"},"commitmentAtxId"),". This is simply the ID of the highest ATX known at the time that PoST initialization begins. It's used to mitigate a certain class of protocol attack; for more information, see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spacemeshos/pm/issues/172"},"POPS-VRF implementation"),"."),(0,a.kt)("p",null,"The simplest way to get this is to ask your own node, using the API as such:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"> grpcurl -plaintext 127.0.0.1:9092 spacemesh.v1.ActivationService.Highest | jq -r '.atx.id.id' | base64 -d | xxd -p -c 64\n435fa442517e9c75087de1b06d2a9d12c345505f3cac93ac52b816171ce48308\n")),(0,a.kt)("p",null,"While we plan to operate public nodes in the near future, we don't operate any at present. We therefore strongly encourage you to double-check this information, ideally by running your own node, or alternatively by checking with the community ",(0,a.kt)("a",{parentName:"p",href:"https://chat.spacemesh.io/"},"on Discord"),"."),(0,a.kt)("h2",{id:"smapp"},"Smapp"),(0,a.kt)("p",null,"The simplest way to run a Spacemesh node is using ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spacemeshos/smapp/"},"Smapp"),", the wallet, full node, and miner frontend application. You can simply download and install the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spacemeshos/smapp/releases"},"latest release")," for your platform and be up and running in no time. Smapp will automatically download the correct configuration file, and will show you visually the network status, its synchronization status, and the status of PoST init and smeshing. Smapp bundles a full go-spacemesh instance under the hood and manages it for you, including upgrades. See ",(0,a.kt)("a",{parentName:"p",href:"start/smapp/install"},"our Smapp guide")," for more information on setting up Smapp."),(0,a.kt)("p",null,"Like running go-spacemesh directly from the command line, Smapp also lets you customize your config file and use the node API directly. Running Smapp doesn't provide any greater or lesser functionality than running go-spacemesh directly, but some technical users may prefer working with CLI rather than GUI, may wish to run go-spacemesh as a system service, etc. Users running without a GUI will of course have no choice but to run go-spacemesh directly via CLI."),(0,a.kt)("h3",{id:"cli"},"CLI"),(0,a.kt)("p",null,"It's possible to run a Spacemesh node entirely from the command line using the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spacemeshos/go-spacemesh"},"go-spacemesh")," full node implementation. You can run a pre-compiled ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/spacemeshos/go-spacemesh/releases"},"binary release")," for your platform, or you can compile the application yourself. We recommend that only more advanced users attempt this method."),(0,a.kt)("p",null,"See our ",(0,a.kt)("a",{parentName:"p",href:"start/CLI/compiling"},"CLI guide")," for more information on setting up your Full Node. "),(0,a.kt)("h2",{id:"general-smesher-guide"},"General Smesher Guide"),(0,a.kt)("p",null,"For more advanced users, our ",(0,a.kt)("a",{parentName:"p",href:"start/smesher"},"Smesher Guide")," will help you refine your node's performance and troubleshoot issues."))}p.isMDXComponent=!0}}]);