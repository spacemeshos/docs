"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2307],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>u});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),c=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(r),u=n,m=d["".concat(l,".").concat(u)]||d[u]||h[u]||s;return r?o.createElement(m,a(a({ref:t},p),{},{components:r})):o.createElement(m,a({ref:t},p))}));function u(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=r.length,a=new Array(s);a[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,a[1]=i;for(var c=2;c<s;c++)a[c]=r[c];return o.createElement.apply(null,a)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3671:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var o=r(7462),n=(r(7294),r(3905));const s={id:"tortoise",title:"Tortoise"},a=void 0,i={unversionedId:"learn/tortoise",id:"learn/tortoise",title:"Tortoise",description:"A different set of eligible, active smeshers votes on the outcome of the Hare and the canonical state of the layer. This voting also happens on the basis of the active set and each smesher's weight relative to the total weight of all eligible smeshers in the epoch, i.e., the total epoch weight. A smesher with 2x the weight will receive 2x the eligibilities in a given epoch. These votes are encoded into messages known as proposals, and smeshers receive rewards for successfully submitting valid proposals in their eligible slots.",source:"@site/docs/learn/tortoise.md",sourceDirName:"learn",slug:"/learn/tortoise",permalink:"/docs/learn/tortoise",draft:!1,tags:[],version:"current",frontMatter:{id:"tortoise",title:"Tortoise"},sidebar:"learn",previous:{title:"Hare",permalink:"/docs/learn/hare"},next:{title:"Rewards",permalink:"/docs/learn/rewards"}},l={},c=[],p={toc:c};function h(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"A ",(0,n.kt)("em",{parentName:"p"},"different")," set of eligible, active smeshers votes on the outcome of the Hare and the canonical state of the layer. This voting also happens on the basis of the active set and each smesher's weight relative to the total weight of all eligible smeshers in the epoch, i.e., the ",(0,n.kt)("strong",{parentName:"p"},"total epoch weight.")," A smesher with 2x the weight will receive 2x the eligibilities in a given epoch. These votes are encoded into messages known as ",(0,n.kt)("strong",{parentName:"p"},"proposals"),", and smeshers receive rewards for successfully submitting valid proposals in their eligible slots."),(0,n.kt)("p",null,"At the beginning of each epoch, each smesher can calculate which layers in the epoch it's eligible to submit a proposal based on its smesher identity, the epoch number, and its weight in that epoch. The node prints this message in the logs every time it's started and fully synced:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'2023-08-11T13:45:00.622-0400    INFO    abcde.proposalBuilder   proposal eligibility for an epoch       {"node_id": "abcde", "module": "proposalBuilder", "epoch_id": 2, "beacon": "e3e3389e", "weight": 141435, "min activeset weight": 5000000, "total weight": 305096691, "total num slots": 93, "num layers eligible": 93, "layers to num proposals": [{"layer": 8091, "slots": 1}, {"layer": 8179, "slots": 1}, {"layer": 8212, "slots": 1}, {"layer": 8215, "slots": 1}, {"layer": 8248, "slots": 1}, {"layer": 8306, "slots": 1}, {"layer": 8382, "slots": 1}, {"layer": 8389, "slots": 1}, {"layer": 8411, "slots": 1}, {"layer": 8432, "slots": 1}, {"layer": 8454, "slots": 1}...], "name": "proposalBuilder"}\n')),(0,n.kt)("p",null,"In Smapp the same thing looks like this:"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://github.com/spacemeshos/wiki/assets/3316532/b0d47343-f4d4-449e-af00-135b67ceff58",alt:"image"})),(0,n.kt)("p",null,"When the layer where it's eligible arrives, after the Hare has finished, the node generates and broadcasts a proposal based on the Hare output. Assuming the proposal was constructed correctly and honestly (e.g., without equivocation), and the node includes a valid eligibility proof and broadcasts the proposal on time, then it (or, more precisely, its coinbase account) will receive a reward when the layer is confirmed and processed."))}h.isMDXComponent=!0}}]);