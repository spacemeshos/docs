"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[496],{5680:(e,t,n)=>{n.d(t,{xA:()=>h,yg:()=>u});var i=n(6540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),d=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},h=function(e){var t=d(e.components);return i.createElement(l.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),m=d(n),p=a,u=m["".concat(l,".").concat(p)]||m[p]||c[p]||o;return n?i.createElement(u,r(r({ref:t},h),{},{components:n})):i.createElement(u,r({ref:t},h))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:a,r[1]=s;for(var d=2;d<o;d++)r[d]=n[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},7072:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var i=n(8168),a=(n(6540),n(5680));const o={id:"equivocation",title:"Avoiding Equivocation"},r=void 0,s={unversionedId:"start/smeshing/smeshing_adv/equivocation",id:"start/smeshing/smeshing_adv/equivocation",title:"Avoiding Equivocation",description:"There is a very small set of behaviors that a smesher in Spacemesh is punished for. If a smesher simply goes offline or fails to publish a proposal when they are eligible to do so, they will miss some rewards but they are not punished per se. However, if a smesher double votes, otherwise known as equivocation, their smesher identity is permanently disqualified from participation in the consensus and from earning rewards in the future.",source:"@site/docs/start/smeshing/smeshing_adv/equivocation.md",sourceDirName:"start/smeshing/smeshing_adv",slug:"/start/smeshing/smeshing_adv/equivocation",permalink:"/docs/start/smeshing/smeshing_adv/equivocation",draft:!1,editUrl:"https://github.com/spacemeshos/docs/edit/main/docs/start/smeshing/smeshing_adv/equivocation.md",tags:[],version:"current",frontMatter:{id:"equivocation",title:"Avoiding Equivocation"},sidebar:"start",previous:{title:"Fine-Tuning Node Performance",permalink:"/docs/start/smeshing/smeshing_adv/performance"},next:{title:"State Verification",permalink:"/docs/start/smeshing/smeshing_adv/verification"}},l={},d=[{value:"Moving an Identity",id:"moving-an-identity",level:3},{value:"Generating Multiple Identities",id:"generating-multiple-identities",level:3}],h={toc:d},m="wrapper";function c(e){let{components:t,...n}=e;return(0,a.yg)(m,(0,i.A)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"There is a very small set of behaviors that a smesher in Spacemesh is punished for. If a smesher simply goes offline or fails to publish a proposal when they are eligible to do so, they will miss some rewards but they are not punished per se. However, if a smesher double votes, otherwise known as equivocation, their smesher identity is permanently disqualified from participation in the consensus and from earning rewards in the future."),(0,a.yg)("admonition",{type:"danger"},(0,a.yg)("p",{parentName:"admonition"},"If a smesher double votes (equivocates), their smesher identity is permanently disqualified from participating in consensus and earning rewards in the future.")),(0,a.yg)("p",null,"In a permissionless blockchain like Spacemesh, equivocation is a serious offense that can have severe negative ramifications for the entire network. As such, this behavior cannot go unsanctioned. Once a smesher's identity has been cancelled, their PoST data is effectively useless. They must generate a new identity and reinitialize their PoST data. For more information, see\n",(0,a.yg)("a",{parentName:"p",href:"https://spacemesh.io/blog/community-clarification-equivocation/"},"Community Clarification: Equivocation"),"."),(0,a.yg)("p",null,"It is not difficult to avoid equivocation: simply make sure that the same identity is never attached to two running nodes at the same time. Extra care must be taken any time a smesher identity or its PoST data are copied or moved\n(since the smesher identity lives in the PoST data directory)."),(0,a.yg)("admonition",{type:"tip"},(0,a.yg)("p",{parentName:"admonition"},"To avoid equivocation, simply ensure that the same identity is never attached to two running nodes at the same time. Be especially careful when relocating PoST data and/or identity files since the smesher identity lives in the PoST data directory.")),(0,a.yg)("h3",{id:"moving-an-identity"},"Moving an Identity"),(0,a.yg)("p",null,"When moving a smesher identity from one place to another, ",(0,a.yg)("strong",{parentName:"p"},"perform the following steps in the given order:")),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Shut down the smeshing node")," in the source location."),(0,a.yg)("li",{parentName:"ol"},"Copy the files to the new location (see previous section)."),(0,a.yg)("li",{parentName:"ol"},(0,a.yg)("strong",{parentName:"li"},"Double-check that the old smeshing node was shut down.")," Check again one more time to make sure. If you get this part wrong, you risk permanently disqualifying the smesher identity for equivalence and invalidation of the PoST data."),(0,a.yg)("li",{parentName:"ol"},"Make sure the ",(0,a.yg)("inlineCode",{parentName:"li"},"local.key")," file is intact in the new location. Compare it to the ",(0,a.yg)("inlineCode",{parentName:"li"},"local.key")," file in the old location and ensure that the contents are the same. Delete the old ",(0,a.yg)("inlineCode",{parentName:"li"},"local.key")," file, or at the very least, rename it\nor move it to ensure that you do not accidentally run the same identity again on the old system."),(0,a.yg)("li",{parentName:"ol"},"Start the smesher in the new location. Make sure that you specify the correct ",(0,a.yg)("inlineCode",{parentName:"li"},"smeshing-opts-datadir")," in the config, and confirm that the other ",(0,a.yg)("inlineCode",{parentName:"li"},"smeshing-opts")," are the same as they were in the old system, and that they match the contents of the ",(0,a.yg)("inlineCode",{parentName:"li"},"postdata_metadata.json")," file in the PoST data directory. Make sure that the smesher found the data and was able to read it. (You should see the messages ",(0,a.yg)("inlineCode",{parentName:"li"},"post setup completed"),", ",(0,a.yg)("inlineCode",{parentName:"li"},"loaded the initial post from disk"),", and ",(0,a.yg)("inlineCode",{parentName:"li"},"verifying the initial post")," in the log.)")),(0,a.yg)("h3",{id:"generating-multiple-identities"},"Generating Multiple Identities"),(0,a.yg)("p",null,"You can use one system to generate multiple PoST identities - this is a common usage pattern for a user who wants to, e.g., generate multiple identities on a system with a GPU, then transfer them to other systems. However, once you have moved the PoST data files (",(0,a.yg)("inlineCode",{parentName:"p"},"postdata_*.bin"),") to their new location and have copied the associated ",(0,a.yg)("inlineCode",{parentName:"p"},"local.key")," as well, ",(0,a.yg)("strong",{parentName:"p"},"make absolutely certain that ",(0,a.yg)("inlineCode",{parentName:"strong"},"local.key")," has been removed")," in the source location. If the file still exists, the next PoST identity you generate will be identical to the prior one and equivocation may occur as a result."))}c.isMDXComponent=!0}}]);